<!DOCTYPE html><html><head><link href="../img/favicon.ico" rel="shortcut icon" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta Name="viewport" content="width=device-width, initial-scale=1.0"><title>永中文档转换服务</title><link rel="stylesheet" href="../template/bootstrap.min.css"><link rel="stylesheet" href="../template/style1.css"></head><STYLE>#container {	min-width: 400px;	min-height: 100px;	border: 2px dotted #000;	-moz-border-radius: 8px;}.top-word {	overflow: hidden;}.top-word .rb, .top-word .lb, .top-word .rb_bottom, .top-word .lb_bottom	{	height: 25px;	width: 25px;}.rb {	border-right: 1px solid #a9a9a9;	border-bottom: 1px solid #a9a9a9;	float: left;}.lb {	border-left: 1px solid #a9a9a9;	border-bottom: 1px solid #a9a9a9;	float: right;}.rb_bottom {	border-right: 1px solid #a9a9a9;	border-top: 1px solid #a9a9a9;	float: left;}.lb_bottom {	border-left: 1px solid #a9a9a9;	border-top: 1px solid #a9a9a9;	float: right;}</STYLE><body class="word-body">	<DIV class="navbar navbar-inverse navbar-fixed-top">		<DIV class="navbar-inner">			<DIV class="container-fluid">				<a class="brand lnk-file-title" STYLE="text-decoration: none;"></a>				<DIV class="nav-collapse collapse">					<ul class="nav word-tab-title"></ul>				</DIV>			</DIV>		</DIV>	</DIV></body><script src="../template/jquery.min.js"></script><script>    /*      1、获取URL，得到文件地址，得到SVG总数      2、向后台传递SVG页码      3、SVG排序默认从1开始的自然数      4、根据总数判断如果已经加载完就不再向后台发送请求    */    var pages ;        function getQuery(){    	//http://localhost:8080/dcs.web/view.html?MjAxNS0xMi0xNCAxMDo0ODozMDYy==%E6%9C%B1%E7%8E%AE+J2EE%E5%BC%80%E5%8F%91.doc     	 var url =	window.location.href;     	 var fileName = url.substring(url.lastIndexOf(".html?")+6,url.indexOf("=="));    	     	 var showName = decodeURI(url.substring(url.indexOf("==")+2));     	 pages = new Array();     	 $(".container-fluid a").html(showName);			$.ajax({				url : "view",				data : {					"fileName" : fileName,				},				dataType : "json",				type : "post",				success : function(data) {				     if(data.result == 0){				    	 var s = "";			                //step1,生成html  style="width:' + o.width + 'px;height:' + o.height + 'px"			                $.each(data.data, function(i, o) {			                	 pages[i]=o;			                    s += '<DIV class="container-fluid container-fluid-content">\									      <DIV class="row-fluid">\									        <DIV class="span12">\									          <DIV class="word-page" STYLE="max-width:720px">\									            <DIV class="word-content">\									        	<div class="ac-block" data-index="' + i + '" ><BR>&nbsp;&nbsp;&nbsp;&nbsp;loading...</div>\						                		</DIV>\									          </DIV>\									        </DIV>\									      </DIV>\									    </DIV>';			                });			                $('body').append(s);			                //查找需要异步加载的box			               this.blocks = $('.ac-block');			                scrollLoad();			                if (this.blocks.length == 0) return;			                $(window).scroll(function(e) {			                	scrollLoad();			                });				     }else{				    	 alert(data.message);				     }				},				error : function(data) {					alert("网络出错");				}			});    }     function scrollLoad(){    	     var blocks =  $('.ac-block'),                 amunt = 100,                 wh = $(window).height() + amunt,                 loadNum = 0;             $.each(blocks, function(i, o) {                 var bound = o.getBoundingClientRect();                 //当元素接近屏幕amunt像素的时候加载                 if (bound.top < wh && bound.bottom > -amunt) {                     var data = pages[o.getAttribute('data-index')];                     loadNum++;                     //debugger;                    /*  console.log(data); */                    // $(o).parent().html('<embed src="' + data.src + '" width="' + data.width + '" height="' + data.height + '" type="image/svg+xml"></embed>');              if(typeof(data)!=='undefined') {                    $(o).parent().html('<embed src="' + data + '" width="100%" height="100%" type="image/svg+xml"></embed>');                    }else{                 	   $(o).parent().parent().parent().remove();                      }                 }             });     }    // 调用方法    $(function() {        //初始化        getQuery();    });    </script></html>